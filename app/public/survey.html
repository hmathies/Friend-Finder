<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Friend Finder Survey</title>
      <meta name="author" content="Heather Mathies">
      <meta name="description" content="">
      <link rel="manifest" href="/manifest.json">
      <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
      <meta name="theme-color" content="#ffffff">
      <!-- Bootstrap latest compiled and minified CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery.js"></script>
      <!-- jQuery Google CDN -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <!-- Bootstrap JS MaxCDN -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
   </head>
   <body>
      <div class="container">
         <h1>Friend Survey</h1>
         <hr>
         <!--
            Your survey should have 10 questions of your choosing. Each answer should be on a scale of 1 to 5 based on how much the user agrees or disagrees with a question. -->
         <!-- Text input-->
         <div class="containter">
            <div class="form-group">
               <label class="col-sm-12 control-label" for="textinput">Name</label>
               <div class="col-sm-12">
                  <input id="name" name="textinput" type="text" placeholder="type your name"  class="form-control input-md">
               </div>
               <label class="col-sm-12 control-label" for="textinput">Photo Link</label>
               <div class="col-sm-12">
                  <input id="photo" name="photo" type="text" placeholder="Paste your photo url here" class="form-control input-md">
                  <hr>
               </div>
            </div>
         </div>
         <!-- Survey Questions -->
         <div class="container">
            <div class="form-group">
               <h3>Question 1: <span class="label label-default"></span>Your ideal date would be a night snuggled up on the couch with snacks and a movie.</h3>
               <div class="col-sm-12 col-md-2">
                  <select id="q1" name="selectbasic" class="form-control">
                     <option value="1">1 (Strongly Disagree)</option>
                     <option value="2">2(Somewhat Agree)</option>
                     <option value="3">3(Agree)</option>
                     <option value="4">4(Agree a lot)</option>
                     <option value="5">5 (Strongly Agree)</option>
                  </select>
                  <!-- submit button -->
                  <hr>
                  <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Find Friends</button>
               </div>
            </div>
         </div>
      </div>
      <script>

          // Capture the form inputs
          $("#submit").on("click", function(e){
            e.preventDefault();


          	// Form validation
          	function validateForm() {
      		  var isValid = true;
      		  $('.form-control').each(function() {
      		    if ( $(this).val() === '' )
      		        isValid = false;
      		  });


      		// If all required fields are filled
      		if (validateForm() == true)
      		{
      			// Create an object for the user's data
      	    	var userData = {
      	    		name: $("#name").val(),
      	    		photo: $("#photo").val(),
      	    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(),
                $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val() ]
      	    	}


      	    	// Grab the URL of the website
      	    	var currentURL = window.location.origin;

      	    	// AJAX post the data to the friends API.
      	    	$.post(currentURL + "/api/friends", userData, function(data){

      	    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
      	    		$("#matchName").text(data.name);
      	    		$('#matchImg').attr("src", data.photo);

      		    	// Show the modal with the best match
      		    	$("#resultsModal").modal('toggle');

      	    	});
      		}
      		else
      		{
      			alert("Please fill out all fields before submitting!");
      		}

          	return false;
          });

      </script>

   </body>
</html>
